# Emergency Personnel Performance Management System

## 🎉 ویژگی‌های جدید نسخه 2.0

### ⚠️ مهم: قبل از اجرا، مهاجرت دیتابیس الزامی است!
لطفاً قبل از اجرای برنامه، فایل `DATABASE_MIGRATION_INSTRUCTIONS.md` را مطالعه کرده و SQL مهاجرت را در Supabase اجرا کنید.

### 1. مدیریت پرسنل پیشرفته
- ✅ **تفکیک فیلد نام**: نام و نام خانوادگی به صورت جداگانه
- ✅ **فیلد سابقه کاری**: انتخاب سابقه کاری از منوی کشویی (۰-۴، ۴-۸، ۸-۱۲، ۱۲-۱۶، ۱۶+ سال)
- ✅ **رابط کاربری بهبود یافته**: فرم‌های حرفه‌ای‌تر و کاربرپسندتر

### 2. نظارت بر عملکرد کامل
- ✅ **ویرایش شیفت با کلیک**: کلیک بر روی هر سلول برای ویرایش
- ✅ **حالت‌های نمایش**: سه حالت نمایش (کد، عنوان+کد، عنوان+کد+پایگاه)
- ✅ **Undo/Redo**: امکان بازگشت و پیش‌روی تغییرات
- ✅ **دکمه‌های عملیاتی**: ذخیره، ذخیره موقت، ذخیره نهایی، ویرایش
- ✅ **ستون‌های خلاصه**: ۷ ستون خلاصه (موظفی، جمع عملکرد، مرخصی، تعطیلات، اضافه‌کار، مأموریت، غذا)
- ✅ **مخفی/نمایش ستون‌ها**: قابلیت مخفی کردن ستون‌های خلاصه
- ✅ **تخصیص گروهی شیفت**: تخصیص دسته‌جمعی با انتخاب دستی و فیلتری

### 3. تخصیص گروهی پیشرفته
- ✅ **انتخاب دستی**: جستجو و انتخاب دستی پرسنل
- ✅ **انتخاب فیلتری**: فیلتر بر اساس بهره‌وری، استخدام، سابقه کاری
- ✅ **انتخاب روزهای انعطاف‌پذیر**: وارد کردن روزها به صورت ۱,۲,۳ یا ۵-۱۰
- ✅ **تخصیص دسته‌ای**: اعمال شیفت به چندین نفر در چندین روز

## اطلاعات سیستم

### URLs
- **GitHub**: https://github.com/robertmandory-alt/P7.git
- **Database**: https://frcrtkfyuejqgclrlpna.supabase.co

### دسترسی مدیر
- **نام کاربری**: admin
- **رمز عبور**: admin1

## معماری داده‌ها
- **دیتابیس**: Supabase PostgreSQL
- **URL**: https://frcrtkfyuejqgclrlpna.supabase.co
- **جداول اصلی**: profiles, personnel, bases, shifts, performance_records

## راهنمای استفاده

### برای کاربران جدید:
1. در صفحه ورود، روی "حساب کاربری ندارید؟ ثبت نام کنید" کلیک کنید
2. نام کاربری (با هر کاراکتر) و رمز عبور (حداقل 6 کاراکتر) وارد کنید
3. پیام "حساب شما در انتظار تایید مدیر سیستم است" را مشاهده خواهید کرد
4. منتظر تایید مدیر باشید

### برای مدیران:
1. با نام کاربری `admin` و رمز عبور `admin1` وارد شوید
2. در منوی اصلی، روی "مدیریت کاربران" کلیک کنید
3. تب "در انتظار تایید" را انتخاب کنید
4. کاربران جدید را تایید یا رد کنید

### نمونه نام‌های کاربری مجاز:
- علی123 ✅
- user@#$% ✅
- محمدعلی رضایی ✅
- 用户名123 ✅
- user.with.dots ✅
- a (اگر رمز عبور حداقل 6 کاراکتر باشد) ✅

## فایل‌های تست
- `test-registration-process.js` - تست کامل فرآیند ثبت نام
- `test-various-usernames.js` - تست انواع فرمت نام کاربری
- `fix-missing-profiles.js` - رفع پروفایل‌های مفقود

## وضعیت سیستم
- **پلتفرم**: React + Supabase
- **وضعیت**: ✅ فعال
- **تکنولوژی**: TypeScript, Vite, TailwindCSS
- **نسخه**: 2.0
- **آخرین بروزرسانی**: ۴ اکتبر ۲۰۲۵

## 📚 مستندات تکمیلی

- **راهنمای ویژگی‌های جدید**: [NEW_FEATURES.md](./NEW_FEATURES.md)
- **دستورالعمل مهاجرت دیتابیس**: [DATABASE_MIGRATION_INSTRUCTIONS.md](./DATABASE_MIGRATION_INSTRUCTIONS.md)
- **راهنمای راه‌اندازی اولیه**: [DATABASE_SETUP.md](./DATABASE_SETUP.md)

## تکنولوژی استفاده شده
- **Frontend**: React 19, TypeScript, TailwindCSS
- **Backend**: Supabase (Auth + Database)
- **Build Tool**: Vite
- **Deployment**: Local Development Server

## نکات مهم برای توسعه
1. همیشه پس از تغییرات `npm run build` اجرا کنید
2. برای اجرای local از `pm2 start ecosystem.config.cjs` استفاده کنید
3. تست‌های موجود را پس از تغییرات اجرا کنید
4. کاربر admin همیشه بایستی وجود داشته باشد

## ساختار پروژه
```
webapp/
├── components/           # کامپوننت‌های React
│   ├── auth/            # صفحات ورود و ثبت نام
│   ├── admin/           # صفحات مدیریت
│   └── shared/          # کامپوننت‌های مشترک
├── context/             # مدیریت state کاربران
├── utils/               # ابزارهای کمکی (Supabase client)
├── test-*.js           # فایل‌های تست
└── dist/               # فایل‌های build شده
```

## تماس و پشتیبانی
برای هرگونه مشکل یا سوال، فایل‌های تست موجود را اجرا کرده و نتایج را بررسی کنید.